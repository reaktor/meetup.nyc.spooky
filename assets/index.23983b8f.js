function Xt(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function X(){}function Ct(n){return n()}function gt(){return Object.create(null)}function he(n){n.forEach(Ct)}function xt(n){return typeof n=="function"}function de(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let De;function _t(n,e){return De||(De=document.createElement("a")),De.href=e,n===De.href}function Zt(n){return Object.keys(n).length===0}function g(n,e){n.appendChild(e)}function R(n,e,t){n.insertBefore(e,t||null)}function j(n){n.parentNode.removeChild(n)}function k(n){return document.createElement(n)}function K(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function q(n){return document.createTextNode(n)}function C(){return q(" ")}function Qt(){return q("")}function V(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function It(n){return function(e){return e.preventDefault(),n.call(this,e)}}function v(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function er(n){return Array.from(n.childNodes)}function se(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function ue(n,e){n.value=e==null?"":e}function ee(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function yt(n,e){for(let t=0;t<n.options.length;t+=1){const r=n.options[t];if(r.__value===e){r.selected=!0;return}}n.selectedIndex=-1}function Fe(n,e,t){n.classList[t?"add":"remove"](e)}function tr(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(n,t,r,e),s}let xe;function Ae(n){xe=n}function Ut(){if(!xe)throw new Error("Function called outside component initialization");return xe}function ht(n){Ut().$$.on_mount.push(n)}function rr(){const n=Ut();return(e,t,{cancelable:r=!1}={})=>{const s=n.$$.callbacks[e];if(s){const i=tr(e,t,{cancelable:r});return s.slice().forEach(o=>{o.call(n,i)}),!i.defaultPrevented}return!0}}const Pe=[],qe=[],ze=[],it=[],nr=Promise.resolve();let ot=!1;function sr(){ot||(ot=!0,nr.then(Ft))}function at(n){ze.push(n)}function Dt(n){it.push(n)}const et=new Set;let Le=0;function Ft(){const n=xe;do{for(;Le<Pe.length;){const e=Pe[Le];Le++,Ae(e),ir(e.$$)}for(Ae(null),Pe.length=0,Le=0;qe.length;)qe.pop()();for(let e=0;e<ze.length;e+=1){const t=ze[e];et.has(t)||(et.add(t),t())}ze.length=0}while(Pe.length);for(;it.length;)it.pop()();ot=!1,et.clear(),Ae(n)}function ir(n){if(n.fragment!==null){n.update(),he(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(at)}}const He=new Set;let be;function Ge(){be={r:0,c:[],p:be}}function Ve(){be.r||he(be.c),be=be.p}function N(n,e){n&&n.i&&(He.delete(n),n.i(e))}function J(n,e,t,r){if(n&&n.o){if(He.has(n))return;He.add(n),be.c.push(()=>{He.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function Lt(n,e,t){const r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function le(n){n&&n.c()}function ie(n,e,t,r){const{fragment:s,on_mount:i,on_destroy:o,after_update:a}=n.$$;s&&s.m(e,t),r||at(()=>{const u=i.map(Ct).filter(xt);o?o.push(...u):he(u),n.$$.on_mount=[]}),a.forEach(at)}function oe(n,e){const t=n.$$;t.fragment!==null&&(he(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function or(n,e){n.$$.dirty[0]===-1&&(Pe.push(n),sr(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function fe(n,e,t,r,s,i,o,a=[-1]){const u=xe;Ae(n);const c=n.$$={fragment:null,ctx:null,props:i,update:X,not_equal:s,bound:gt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:gt(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};o&&o(c.root);let l=!1;if(c.ctx=t?t(n,e.props||{},(h,p,..._)=>{const f=_.length?_[0]:p;return c.ctx&&s(c.ctx[h],c.ctx[h]=f)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](f),l&&or(n,h)),p}):[],c.update(),l=!0,he(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const h=er(e.target);c.fragment&&c.fragment.l(h),h.forEach(j)}else c.fragment&&c.fragment.c();e.intro&&N(n.$$.fragment),ie(n,e.target,e.anchor,e.customElement),Ft()}Ae(u)}class pe{$destroy(){oe(this,1),this.$destroy=X}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!Zt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ar="modulepreload",lr=function(n){return"/"+n},bt={},Ke=function(e,t,r){return!t||t.length===0?e():Promise.all(t.map(s=>{if(s=lr(s),s in bt)return;bt[s]=!0;const i=s.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${o}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":ar,i||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),i)return new Promise((u,c)=>{a.addEventListener("load",u),a.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};var cr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};const ur=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>cr(void 0,void 0,void 0,function*(){return yield(yield Ke(()=>Promise.resolve().then(()=>We),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class dt extends Error{constructor(e,t="FunctionsError",r){super(e),super.name=t,this.context=r}}class hr extends dt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class dr extends dt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fr extends dt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var pr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};class mr{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=ur(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return pr(this,void 0,void 0,function*(){try{const{headers:s,body:i}=t;let o={},a;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=i):typeof i=="string"?(o["Content-Type"]="text/plain",a=i):typeof FormData<"u"&&i instanceof FormData?a=i:(o["Content-Type"]="application/json",a=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:a}).catch(p=>{throw new hr(p)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new dr(u);if(!u.ok)throw new fr(u);let l=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),h;return l==="application/json"?h=yield u.json():l==="application/octet-stream"?h=yield u.blob():l==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(s){return{data:null,error:s}}})}}var vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ie={exports:{}};(function(n,e){var t=typeof self<"u"?self:vr,r=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var a={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function u(d){return d&&DataView.prototype.isPrototypeOf(d)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(d){return d&&c.indexOf(Object.prototype.toString.call(d))>-1};function h(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function p(d){return typeof d!="string"&&(d=String(d)),d}function _(d){var m={next:function(){var S=d.shift();return{done:S===void 0,value:S}}};return a.iterable&&(m[Symbol.iterator]=function(){return m}),m}function f(d){this.map={},d instanceof f?d.forEach(function(m,S){this.append(S,m)},this):Array.isArray(d)?d.forEach(function(m){this.append(m[0],m[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(m){this.append(m,d[m])},this)}f.prototype.append=function(d,m){d=h(d),m=p(m);var S=this.map[d];this.map[d]=S?S+", "+m:m},f.prototype.delete=function(d){delete this.map[h(d)]},f.prototype.get=function(d){return d=h(d),this.has(d)?this.map[d]:null},f.prototype.has=function(d){return this.map.hasOwnProperty(h(d))},f.prototype.set=function(d,m){this.map[h(d)]=p(m)},f.prototype.forEach=function(d,m){for(var S in this.map)this.map.hasOwnProperty(S)&&d.call(m,this.map[S],S,this)},f.prototype.keys=function(){var d=[];return this.forEach(function(m,S){d.push(S)}),_(d)},f.prototype.values=function(){var d=[];return this.forEach(function(m){d.push(m)}),_(d)},f.prototype.entries=function(){var d=[];return this.forEach(function(m,S){d.push([S,m])}),_(d)},a.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);function w(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function b(d){return new Promise(function(m,S){d.onload=function(){m(d.result)},d.onerror=function(){S(d.error)}})}function E(d){var m=new FileReader,S=b(m);return m.readAsArrayBuffer(d),S}function y(d){var m=new FileReader,S=b(m);return m.readAsText(d),S}function T(d){for(var m=new Uint8Array(d),S=new Array(m.length),F=0;F<m.length;F++)S[F]=String.fromCharCode(m[F]);return S.join("")}function O(d){if(d.slice)return d.slice(0);var m=new Uint8Array(d.byteLength);return m.set(new Uint8Array(d)),m.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:a.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:a.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():a.arrayBuffer&&a.blob&&u(d)?(this._bodyArrayBuffer=O(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||l(d))?this._bodyArrayBuffer=O(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var d=w(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(E)}),this.text=function(){var d=w(this);if(d)return d;if(this._bodyBlob)return y(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(z)}),this.json=function(){return this.text().then(JSON.parse)},this}var me=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function M(d){var m=d.toUpperCase();return me.indexOf(m)>-1?m:d}function Z(d,m){m=m||{};var S=m.body;if(d instanceof Z){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,m.headers||(this.headers=new f(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!S&&d._bodyInit!=null&&(S=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new f(m.headers)),this.method=M(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&S)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(S)}Z.prototype.clone=function(){return new Z(this,{body:this._bodyInit})};function z(d){var m=new FormData;return d.trim().split("&").forEach(function(S){if(S){var F=S.split("="),L=F.shift().replace(/\+/g," "),$=F.join("=").replace(/\+/g," ");m.append(decodeURIComponent(L),decodeURIComponent($))}}),m}function H(d){var m=new f,S=d.replace(/\r?\n[\t ]+/g," ");return S.split(/\r?\n/).forEach(function(F){var L=F.split(":"),$=L.shift().trim();if($){var x=L.join(":").trim();m.append($,x)}}),m}P.call(Z.prototype);function D(d,m){m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in m?m.statusText:"OK",this.headers=new f(m.headers),this.url=m.url||"",this._initBody(d)}P.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},D.error=function(){var d=new D(null,{status:0,statusText:""});return d.type="error",d};var $e=[301,302,303,307,308];D.redirect=function(d,m){if($e.indexOf(m)===-1)throw new RangeError("Invalid status code");return new D(null,{status:m,headers:{location:d}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,S){this.message=m,this.name=S;var F=Error(m);this.stack=F.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function ke(d,m){return new Promise(function(S,F){var L=new Z(d,m);if(L.signal&&L.signal.aborted)return F(new o.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function x(){$.abort()}$.onload=function(){var G={status:$.status,statusText:$.statusText,headers:H($.getAllResponseHeaders()||"")};G.url="responseURL"in $?$.responseURL:G.headers.get("X-Request-URL");var Ee="response"in $?$.response:$.responseText;S(new D(Ee,G))},$.onerror=function(){F(new TypeError("Network request failed"))},$.ontimeout=function(){F(new TypeError("Network request failed"))},$.onabort=function(){F(new o.DOMException("Aborted","AbortError"))},$.open(L.method,L.url,!0),L.credentials==="include"?$.withCredentials=!0:L.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&a.blob&&($.responseType="blob"),L.headers.forEach(function(G,Ee){$.setRequestHeader(Ee,G)}),L.signal&&(L.signal.addEventListener("abort",x),$.onreadystatechange=function(){$.readyState===4&&L.signal.removeEventListener("abort",x)}),$.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return ke.polyfill=!0,i.fetch||(i.fetch=ke,i.Headers=f,i.Request=Z,i.Response=D),o.Headers=f,o.Request=Z,o.Response=D,o.fetch=ke,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,n.exports=e})(Ie,Ie.exports);const ft=gr(Ie.exports),We=Xt({__proto__:null,default:ft},[Ie.exports]);var _r=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};class yr{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.allowEmpty=e.allowEmpty,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ft:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){typeof this.schema>"u"||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>_r(this,void 0,void 0,function*(){var o,a,u,c;let l,h,p,_=i.status,f=i.statusText;if(i.ok){const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.split(",").includes("return=minimal");if(this.method!=="HEAD"&&!b){const T=yield i.text();T&&(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.indexOf("application/vnd.pgrst.plan+text")!==-1?h=T:h=JSON.parse(T))}const E=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),y=(u=i.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");E&&y&&y.length>1&&(p=parseInt(y[1]))}else{const b=yield i.text();try{l=JSON.parse(b)}catch{l={message:b}}if(l&&this.allowEmpty&&((c=l==null?void 0:l.details)===null||c===void 0?void 0:c.includes("Results contain 0 rows"))&&(l=void 0,_=200,f="OK"),l&&this.shouldThrowOnError)throw l}return{error:l,data:h,count:p,status:_,statusText:f}}));return this.shouldThrowOnError||(s=s.catch(i=>({error:{message:`FetchError: ${i.message}`,details:"",hint:"",code:i.code||""},data:void 0,count:void 0,status:400,statusText:"Bad Request"}))),s.then(e,t)}}class br extends yr{select(e){let t=!1;const r=(e!=null?e:"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}}class Se extends br{not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}}class wr{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e!=null?e:"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Se({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t}={}){const r="POST",s=[],i=e;if(t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,u)=>a.concat(Object.keys(u)),[]);if(o.length>0){const a=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",a.join(","))}}return new Se({method:r,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,count:r,ignoreDuplicates:s=!1}={}){const i="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];t!==void 0&&this.url.searchParams.set("on_conflict",t);const a=e;return r&&o.push(`count=${r}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new Se({method:i,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",s=[],i=e;return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Se({method:r,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Se({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const kr="1.0.0-rc.5",Er={"X-Client-Info":`postgrest-js/${kr}`};class Tr{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Er),t),this.schema=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new wr(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:s}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(i="HEAD",Object.entries(t).forEach(([c,l])=>{o.searchParams.append(c,`${l}`)})):(i="POST",a=t);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new Se({method:i,url:o,headers:u,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}}var A;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(A||(A={}));const wt=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Or(o,n,e,s),i),{})},Or=(n,e,t,r)=>{const s=e.find(a=>a.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?Bt(i,o):lt(o)},Bt=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return $r(e,t)}switch(n){case A.bool:return Sr(e);case A.float4:case A.float8:case A.int2:case A.int4:case A.int8:case A.numeric:case A.oid:return jr(e);case A.json:case A.jsonb:return Rr(e);case A.timestamp:return Pr(e);case A.abstime:case A.date:case A.daterange:case A.int4range:case A.int8range:case A.money:case A.reltime:case A.text:case A.time:case A.timestamptz:case A.timetz:case A.tsrange:case A.tstzrange:return lt(e);default:return lt(e)}},lt=n=>n,Sr=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},jr=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Rr=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},$r=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Bt(e,a))}return n},Pr=n=>typeof n=="string"?n.replace(" ","T"):n;var tt,kt;function Ar(){if(kt)return tt;kt=1;var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return tt=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}(),tt}const Cr="websocket",xr="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Ir=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Ur="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Dr=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Fr="1.0.34",Lr={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Br="https://github.com/theturtle32/WebSocket-Node",Nr={node:">=4.0.0"},Mr={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},zr={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Hr={verbose:!1},qr={test:"tape test/unit/*.js",gulp:"gulp"},Jr="index",Gr={lib:"./lib"},Vr="lib/browser.js",Kr="Apache-2.0",Wr={name:Cr,description:xr,keywords:Ir,author:Ur,contributors:Dr,version:Fr,repository:Lr,homepage:Br,engines:Nr,dependencies:Mr,devDependencies:zr,config:Hr,scripts:qr,main:Jr,directories:Gr,browser:Vr,license:Kr};var Yr=Wr.version,ve;if(typeof globalThis=="object")ve=globalThis;else try{ve=Ar()}catch{}finally{if(!ve&&typeof window<"u"&&(ve=window),!ve)throw new Error("Could not determine global this")}var Ue=ve.WebSocket||ve.MozWebSocket,Xr=Yr;function Nt(n,e){var t;return e?t=new Ue(n,e):t=new Ue(n),t}Ue&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(Nt,n,{get:function(){return Ue[n]}})});var Zr={w3cwebsocket:Ue?Nt:null,version:Xr};const Qr="2.0.0-rc.5",en={"X-Client-Info":`realtime-js/${Qr}`},tn="1.0.0",Mt=1e4,rn=1e3;var Ce;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ce||(Ce={}));var W;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(W||(W={}));var re;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(re||(re={}));var ct;(function(n){n.websocket="websocket"})(ct||(ct={}));var ge;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ge||(ge={}));class zt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class nn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const u=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:u,payload:c}}}class rt{constructor(e,t,r={},s=Mt){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel.joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel.on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class je{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel.on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel.joinRef(),this.state=je.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=je.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],a()}),this.channel.on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=je.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel.trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel.trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel.trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},u={};return this.map(i,(c,l)=>{o[c]||(u[c]=l)}),this.map(o,(c,l)=>{const h=i[c];if(h){const p=l.map(b=>b.presence_ref),_=h.map(b=>b.presence_ref),f=l.filter(b=>_.indexOf(b.presence_ref)<0),w=h.filter(b=>p.indexOf(b.presence_ref)<0);f.length>0&&(a[c]=f),w.length>0&&(u[c]=w)}else a[c]=l}),this.syncDiff(i,{joins:a,leaves:u},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,u)=>{var c;const l=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(u),l.length>0){const h=e[a].map(_=>_.presence_ref),p=l.filter(_=>h.indexOf(_.presence_ref)<0);e[a].unshift(...p)}r(a,l,u)}),this.map(o,(a,u)=>{let c=e[a];if(!c)return;const l=u.map(h=>h.presence_ref);c=c.filter(h=>l.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,u),c.length===0&&delete e[a]}),e}static list(e,t){return t||(t=(r,s)=>s),this.map(e,(r,s)=>t(r,s))}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}list(e){return je.list(this.state,e)}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}var Et=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})},Tt;(function(n){n.broadcast="broadcast",n.presence="presence",n.postgres_changes="postgres_changes"})(Tt||(Tt={}));var Ot;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ot||(Ot={}));class pt{constructor(e,t={},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=W.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new rt(this,re.join,this.params,this.timeout),this.rejoinTimer=new zt(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=W.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=W.closed,this.socket.remove(this)}),this.onError(s=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=W.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this.isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=W.errored,this.rejoinTimer.scheduleTimeout())}),this.on(re.reply,{},(s,i)=>{this.trigger(this.replyEventName(i),s)}),this.presence=new je(this)}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e,t=this.timeout){var r,s;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this.onError(c=>e&&e("CHANNEL_ERROR",c)),this.onClose(()=>e&&e("CLOSED"));const a={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&s!==void 0?s:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},a)),this.joinedOnce=!0,this.rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var l;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,p=(l=h==null?void 0:h.length)!==null&&l!==void 0?l:0,_=[];for(let f=0;f<p;f++){const w=h[f],{filter:{event:b,schema:E,table:y,filter:T}}=w,O=c&&c[f];if(O&&O.event===b&&O.schema===E&&O.table===y&&O.filter===T)_.push(Object.assign(Object.assign({},w),{id:O.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return Et(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return Et(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}onClose(e){this.on(re.close,{},e)}onError(e){this.on(re.error,{},t=>e(t))}on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&pt.isEqual(s.filter,t))}),this}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new rt(this,e,t,r);return this.canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}send(e,t={}){return new Promise(r=>{var s,i,o;const a=this.push(e.type,e,t.timeout||this.timeout);a.rateLimited&&r("rate limited"),e.type==="broadcast"&&!(!((o=(i=(s=this.params)===null||s===void 0?void 0:s.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.ack)&&r("ok"),a.receive("ok",()=>r("ok")),a.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=W.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(re.close,"leave",this.joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new rt(this,re.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this.canPush()||s.trigger("ok",{})})}onMessage(e,t,r){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=W.joining,this.joinPush.resend(e))}trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:u,leave:c,join:l}=re;if(r&&[a,u,c,l].indexOf(o)>=0&&r!==this.joinRef())return;let p=this.onMessage(o,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var f,w,b;return((f=_.filter)===null||f===void 0?void 0:f.event)==="*"||((b=(w=_.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(_=>_.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(_=>{var f,w,b,E,y,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in _){const O=_.id,P=(f=_.filter)===null||f===void 0?void 0:f.event;return O&&((w=t.ids)===null||w===void 0?void 0:w.includes(O))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const O=(y=(E=_==null?void 0:_.filter)===null||E===void 0?void 0:E.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return O==="*"||O===((T=t==null?void 0:t.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===o}).map(_=>{if(typeof p=="object"&&"ids"in p){const f=p.data,{schema:w,table:b,commit_timestamp:E,type:y,errors:T}=f;p=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:E,eventType:y,new:{},old:{},errors:T}),this.getPayloadRecords(f))}_.callback(p,r)})}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===W.closed}isErrored(){return this.state===W.errored}isJoined(){return this.state===W.joined}isJoining(){return this.state===W.joining}isLeaving(){return this.state===W.leaving}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=wt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=wt(e.columns,e.old_record)),t}}var sn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};const on=()=>{};class an{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=en,this.params={},this.timeout=Mt,this.transport=Zr.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=on,this.conn=null,this.sendBuffer=[],this.serializer=new nn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${ct.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.eventsPerSecond;s&&(this.eventsPerSecondLimitMs=Math.floor(1e3/s)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zt(()=>sn(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t!=null?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return e.unsubscribe().then(t=>(this.channels.length===0&&this.disconnect(),t))}removeAllChannels(){return Promise.all(this.channels.map(e=>e.unsubscribe())).then(e=>(this.disconnect(),e))}log(e,t,r){this.logger(e,t,r)}onOpen(e){this.stateChangeCallbacks.open.push(e)}onClose(e){this.stateChangeCallbacks.close.push(e)}onError(e){this.stateChangeCallbacks.error.push(e)}onMessage(e){this.stateChangeCallbacks.message.push(e)}connectionState(){switch(this.conn&&this.conn.readyState){case Ce.connecting:return ge.Connecting;case Ce.open:return ge.Open;case Ce.closing:return ge.Closing;default:return ge.Closed}}isConnected(){return this.connectionState()===ge.Open}remove(e){this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}channel(e,t={}){this.isConnected()||this.connect();const r=new pt(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e;let o=()=>{this.encode(e,a=>{var u;(u=this.conn)===null||u===void 0||u.send(a)})};if(this.log("push",`${t} ${r} (${i})`,s),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this.throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a.isMember(r)).forEach(a=>a.trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:tn}))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t.isJoined()&&t.push(re.access_token,{access_token:e})})}leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r.isJoined()||r.isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e.trigger(re.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(rn,"hearbeat timeout");return}this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t),!1)}}class Ht extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Y(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class ln extends Ht{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class cn extends Ht{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var qt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};const Jt=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qt(void 0,void 0,void 0,function*(){return yield(yield Ke(()=>Promise.resolve().then(()=>We),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},un=()=>qt(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ke(()=>Promise.resolve().then(()=>We),void 0)).Response:Response});var Re=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};const St=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),hn=(n,e)=>Re(void 0,void 0,void 0,function*(){const t=yield un();n instanceof t?n.json().then(r=>{e(new ln(St(r),n.status||500))}):e(new cn(St(n),n))}),dn=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function Ye(n,e,t,r,s,i){return Re(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,dn(e,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>hn(u,a))})})}function ut(n,e,t,r){return Re(this,void 0,void 0,function*(){return Ye(n,"GET",e,t,r)})}function _e(n,e,t,r,s){return Re(this,void 0,void 0,function*(){return Ye(n,"POST",e,r,s,t)})}function fn(n,e,t,r,s){return Re(this,void 0,void 0,function*(){return Ye(n,"PUT",e,r,s,t)})}function Gt(n,e,t,r,s){return Re(this,void 0,void 0,function*(){return Ye(n,"DELETE",e,r,s,t)})}var ne=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};const pn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vn{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Jt(s)}uploadOrUpdate(e,t,r,s){return ne(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},mn),s),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),l=yield this.fetch(`${this.url}/object/${c}`,{method:e,body:i,headers:a});if(l.ok)return{data:{path:u},error:null};{const h=yield l.json();return{data:null,error:h}}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}upload(e,t,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}update(e,t,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return ne(this,void 0,void 0,function*(){try{return{data:yield _e(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}copy(e,t){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield _e(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t){return ne(this,void 0,void 0,function*(){try{const r=this._getFinalPath(e);let s=yield _e(this.fetch,`${this.url}/object/sign/${r}`,{expiresIn:t},{headers:this.headers});return s={signedUrl:encodeURI(`${this.url}${s.signedURL}`)},{data:s,error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t){return ne(this,void 0,void 0,function*(){try{return{data:(yield _e(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers})).map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}`):null})),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}download(e){return ne(this,void 0,void 0,function*(){try{const t=this._getFinalPath(e);return{data:yield(yield ut(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}getPublicUrl(e){const t=this._getFinalPath(e);return{data:{publicUrl:encodeURI(`${this.url}/object/public/${t}`)}}}remove(e){return ne(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}list(e,t,r){return ne(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},pn),t),{prefix:e||""});return{data:yield _e(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}const gn="2.0.0-rc.2",_n={"X-Client-Info":`storage-js/${gn}`};var Te=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};class yn{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},_n),t),this.fetch=Jt(r)}listBuckets(){return Te(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Y(e))return{data:null,error:e};throw e}})}getBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Te(this,void 0,void 0,function*(){try{return{data:yield _e(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Te(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield _e(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}}class bn extends yn{constructor(e,t={},r){super(e,t,r)}from(e){return new vn(this.url,this.headers,e,this.fetch)}}const wn="2.0.0-rc.10",kn={"X-Client-Info":`supabase-js/${wn}`};var En=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};const Tn=n=>{let e;return n?e=n:typeof fetch>"u"?e=ft:e=fetch,(...t)=>e(...t)},On=()=>typeof Headers>"u"?Ie.exports.Headers:Headers,Sn=(n,e,t)=>{const r=Tn(t),s=On();return(i,o)=>En(void 0,void 0,void 0,function*(){var a;const u=(a=yield e())!==null&&a!==void 0?a:n;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};function jn(n){return n.replace(/\/$/,"")}function Rn(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:o,auth:a,realtime:u,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},u),s),global:Object.assign(Object.assign({},c),i)}}var Xe=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};function $n(n){return Math.round(Date.now()/1e3)+n}function Pn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const we=()=>typeof window<"u";function te(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),s=r.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}const Vt=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Xe(void 0,void 0,void 0,function*(){return yield(yield Ke(()=>Promise.resolve().then(()=>We),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},An=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Cn=(n,e,t)=>Xe(void 0,void 0,void 0,function*(){yield n.setItem(e,JSON.stringify(t))}),jt=(n,e)=>Xe(void 0,void 0,void 0,function*(){const t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),xn=(n,e)=>Xe(void 0,void 0,void 0,function*(){yield n.removeItem(e)});class Ze{constructor(){this.promise=new Ze.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ze.promiseConstructor=Promise;class mt extends Error{constructor(e){super(e),this.__isAuthError=!0,this.name="AuthError"}}function U(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class In extends mt{constructor(e,t){super(e),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Kt extends mt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Qe extends mt{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Be extends Qe{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class nt extends Qe{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class ae extends Qe{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Je extends Qe{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var vt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})},Un=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Ne=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Dn=(n,e)=>vt(void 0,void 0,void 0,function*(){An(n)?n.status>=500&&n.status<=599?e(new Je(Ne(n),n.status)):n.json().then(t=>{e(new In(Ne(t),n.status||500))}).catch(t=>{e(new Kt(Ne(t),t))}):e(new Je(Ne(n),0))}),Fn=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function B(n,e,t,r){var s,i;return vt(this,void 0,void 0,function*(){const o=(s=r==null?void 0:r.headers)!==null&&s!==void 0?s:{};r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=yield Ln(n,e,t+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}})}function Ln(n,e,t,r,s,i){return vt(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Fn(e,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>Dn(u,a))})})}function Oe(n){var e;let t=null;Nn(n)&&(t=Object.assign({},n),t.expires_at=$n(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ye(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Bn(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=Un(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:a,user:u},error:null}}function Nn(n){return n.access_token&&n.refresh_token&&n.expires_in}var ce=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})},Mn=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class zn{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Vt(r)}signOut(e){return ce(this,void 0,void 0,function*(){try{return yield B(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{error:null}}catch(t){if(U(t))return{error:t};throw t}})}inviteUserByEmail(e,t={}){return ce(this,void 0,void 0,function*(){try{return yield B(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ye})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}})}generateLink(e){return ce(this,void 0,void 0,function*(){try{const{options:t}=e,r=Mn(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),yield B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Bn,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(U(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return ce(this,void 0,void 0,function*(){try{return yield B(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ye})}catch(t){if(U(t))return{data:{user:null},error:t};throw t}})}listUsers(){return ce(this,void 0,void 0,function*(){try{const{data:e,error:t}=yield B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers});if(t)throw t;return{data:Object.assign({},e),error:null}}catch(e){if(U(e))return{data:{users:[]},error:e};throw e}})}getUserById(e){return ce(this,void 0,void 0,function*(){try{return yield B(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ye})}catch(t){if(U(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return ce(this,void 0,void 0,function*(){try{return yield B(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ye})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}})}deleteUser(e){return ce(this,void 0,void 0,function*(){try{return yield B(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ye})}catch(t){if(U(t))return{data:{user:null},error:t};throw t}})}}const Hn="2.0.0-rc.5",qn="http://localhost:9999",Jn="supabase.auth.token",Gn={"X-Client-Info":`gotrue-js/${Hn}`},st=10,Me={MAX_RETRIES:10,RETRY_INTERVAL:2},Vn={getItem:n=>we()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{!we()||globalThis.localStorage.setItem(n,e)},removeItem:n=>{!we()||globalThis.localStorage.removeItem(n)}};function Kn(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var I=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};Kn();const Wn={url:qn,storageKey:Jn,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gn};class Yn{constructor(e){this.stateChangeEmitters=new Map,this.networkRetries=0,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0;const t=Object.assign(Object.assign({},Wn),e);this.inMemorySession=null,this.storageKey=t.storageKey,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.storage=t.storage||Vn,this.admin=new zn({url:t.url,headers:t.headers,fetch:t.fetch}),this.url=t.url,this.headers=t.headers,this.fetch=Vt(t.fetch),this.detectSessionInUrl=t.detectSessionInUrl,this.initialize()}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return I(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{if(this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:t}=yield this._getSessionFromUrl();if(t)return yield this._removeSession(),{error:t};const{session:r,redirectType:s}=e;return yield this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN",r),s==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY",r),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return U(e)?{error:e}:{error:new Kt("Unexpected error during initialization",e)}}finally{this._handleVisibilityChange()}})}signUp(e){return I(this,void 0,void 0,function*(){try{yield this._removeSession();let t;if("email"in e){const{email:a,password:u,options:c}=e;t=yield B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:c==null?void 0:c.emailRedirectTo,body:{email:a,password:u,data:c==null?void 0:c.data,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Oe})}else if("phone"in e){const{phone:a,password:u,options:c}=e;t=yield B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:a,password:u,data:c==null?void 0:c.data,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Oe})}else throw new nt("You must provide either an email or phone number and a password");const{data:r,error:s}=t;if(s||!r)return{data:{user:null,session:null},error:s};const i=r.session,o=r.user;return r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:o,session:i},error:null}}catch(t){if(U(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithPassword(e){return I(this,void 0,void 0,function*(){try{yield this._removeSession();let t;if("email"in e){const{email:i,password:o,options:a}=e;t=yield B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Oe})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=yield B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Oe})}else throw new nt("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s||!r?{data:{user:null,session:null},error:s}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:s})}catch(t){if(U(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){var t,r,s;return I(this,void 0,void 0,function*(){return yield this._removeSession(),this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams})})}signInWithOtp(e){var t,r,s,i;return I(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:o,options:a}=e,{error:u}=yield B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:o,options:a}=e,{error:u}=yield B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null},error:u}}throw new nt("You must provide either an email or phone number.")}catch(o){if(U(o))return{data:{user:null,session:null},error:o};throw o}})}verifyOtp(e){var t,r;return I(this,void 0,void 0,function*(){try{yield this._removeSession();const{data:s,error:i}=yield B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captchaToken:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:Oe});if(i)throw i;if(!s)throw"An error occurred on token verification.";const o=s.session,a=s.user;return o!=null&&o.access_token&&(yield this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}})}getSession(){return I(this,void 0,void 0,function*(){yield this.initializePromise;let e=null;if(this.persistSession){const i=yield jt(this.storage,this.storageKey);i!==null&&(this._isValidSession(i)?e=i:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};if(!(e.expires_at?e.expires_at<=Date.now()/1e3:!1))return{data:{session:e},error:null};const{session:r,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}})}getUser(e){var t,r;return I(this,void 0,void 0,function*(){try{if(!e){const{data:s,error:i}=yield this.getSession();if(i)throw i;e=(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.headers.Authorization}return yield B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ye})}catch(s){if(U(s))return{data:{user:null},error:s};throw s}})}updateUser(e){return I(this,void 0,void 0,function*(){try{const{data:t,error:r}=yield this.getSession();if(r)throw r;if(!t.session)throw new Be;const s=t.session,{data:i,error:o}=yield B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,body:e,jwt:s.access_token,xform:ye});if(o)throw o;return s.user=i.user,yield this._saveSession(s),this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}catch(t){if(U(t))return{data:{user:null},error:t};throw t}})}setSession(e){return I(this,void 0,void 0,function*(){try{if(!e)throw new Be;const{data:t,error:r}=yield this._refreshAccessToken(e);return r?{data:{session:null,user:null},error:r}:t.session?(yield this._saveSession(t.session),this._notifyAllSubscribers("TOKEN_REFRESHED",t.session),{data:t,error:null}):{data:{session:null,user:null},error:null}}catch(t){if(U(t))return{data:{session:null,user:null},error:t};throw t}})}_getSessionFromUrl(){return I(this,void 0,void 0,function*(){try{if(!we())throw new ae("No browser detected.");if(!this._isImplicitGrantFlow())throw new ae("Not a valid implicit grant flow url.");const e=te("error_description");if(e){const f=te("error_code");if(!f)throw new ae("No error_code detected.");const w=te("error");throw w?new ae(e,{error:w,code:f}):new ae("No error detected.")}const t=te("provider_token"),r=te("access_token");if(!r)throw new ae("No access_token detected.");const s=te("expires_in");if(!s)throw new ae("No expires_in detected.");const i=te("refresh_token");if(!i)throw new ae("No refresh_token detected.");const o=te("token_type");if(!o)throw new ae("No token_type detected.");const u=Math.round(Date.now()/1e3)+parseInt(s),{data:c,error:l}=yield this.getUser(r);if(l)throw l;const h=c.user,p={provider_token:t,access_token:r,expires_in:parseInt(s),expires_at:u,refresh_token:i,token_type:o,user:h},_=te("type");return window.location.hash="",{data:{session:p,redirectType:_},error:null}}catch(e){if(U(e))return{data:{session:null,redirectType:null},error:e};throw e}})}_isImplicitGrantFlow(){return we()&&(Boolean(te("access_token"))||Boolean(te("error_description")))}signOut(){var e;return I(this,void 0,void 0,function*(){const{data:t,error:r}=yield this.getSession();if(r)return{error:r};const s=(e=t.session)===null||e===void 0?void 0:e.access_token;if(s){const{error:i}=yield this.admin.signOut(s);if(i)return{error:i}}return yield this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=Pn(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:{subscription:r}}}resetPasswordForEmail(e,t={}){return I(this,void 0,void 0,function*(){try{return yield B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(U(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return I(this,void 0,void 0,function*(){try{return yield B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Oe})}catch(t){if(U(t))return{data:{session:null,user:null},error:t};throw t}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t={}){const r=this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return we()&&(window.location.href=r),{data:{provider:e,url:r},error:null}}_recoverAndRefresh(){var e;return I(this,void 0,void 0,function*(){try{const t=yield jt(this.storage,this.storageKey);if(!this._isValidSession(t)){t!==null&&(yield this._removeSession());return}const r=Math.round(Date.now()/1e3);if(((e=t.expires_at)!==null&&e!==void 0?e:1/0)<r+st)if(this.autoRefreshToken&&t.refresh_token){this.networkRetries++;const{error:s}=yield this._callRefreshToken(t.refresh_token);if(s){if(console.log(s.message),s instanceof Je&&this.networkRetries<Me.MAX_RETRIES){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(()=>this._recoverAndRefresh(),Math.pow(Me.RETRY_INTERVAL,this.networkRetries)*100);return}yield this._removeSession()}this.networkRetries=0}else yield this._removeSession();else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){console.error(t);return}})}_callRefreshToken(e){var t,r;return I(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new Ze,!e)throw new Be;const{data:s,error:i}=yield this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new Be;yield this._saveSession(s.session),this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(U(s)){const i={session:null,error:s};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(e,t){this.stateChangeEmitters.forEach(r=>r.callback(e,t))}_saveSession(e){return I(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=e);const t=e.expires_at;if(t){const r=Math.round(Date.now()/1e3),s=t-r,i=s>st?st:.5;this._startAutoRefreshToken((s-i)*1e3,e)}this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return Cn(this.storage,this.storageKey,e)}_removeSession(){return I(this,void 0,void 0,function*(){this.persistSession?yield xn(this.storage,this.storageKey):this.inMemorySession=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer)})}_startAutoRefreshToken(e,t){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>I(this,void 0,void 0,function*(){this.networkRetries++;const{error:r}=yield this._callRefreshToken(t.refresh_token);r||(this.networkRetries=0),r instanceof Je&&this.networkRetries<Me.MAX_RETRIES&&this._startAutoRefreshToken(Math.pow(Me.RETRY_INTERVAL,this.networkRetries)*100,t)}),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_handleVisibilityChange(){if(!we()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("visibilitychange",()=>I(this,void 0,void 0,function*(){document.visibilityState==="visible"&&(yield this.initializePromise,yield this._recoverAndRefresh())}))}catch(e){console.error("_handleVisibilityChange",e)}}_getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),t!=null&&t.queryParams){const s=new URLSearchParams(t.queryParams);r.push(s.toString())}return`${this.url}/authorize?${r.join("&")}`}}class Xn extends Yn{constructor(e){super(e)}}var Zn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(h){o(h)}}function u(l){try{c(r.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})};const Qn={headers:kn},es={schema:"public"},ts={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},rs={};class ns{constructor(e,t,r){var s,i,o,a,u,c,l,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const p=jn(e);if(this.realtimeUrl=`${p}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${p}/auth/v1`,this.storageUrl=`${p}/storage/v1`,p.match(/(supabase\.co)|(supabase\.in)/)){const E=p.split(".");this.functionsUrl=`${E[0]}.functions.${E[1]}.${E[2]}`}else this.functionsUrl=`${p}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,w={db:es,realtime:rs,auth:Object.assign(Object.assign({},ts),{storageKey:f}),global:Qn},b=Rn(r!=null?r:{},w);this.storageKey=(i=(s=b.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=b.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((u=b.auth)!==null&&u!==void 0?u:{},this.headers,(c=b.global)===null||c===void 0?void 0:c.fetch),this.fetch=Sn(t,this._getAccessToken.bind(this),(l=b.global)===null||l===void 0?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new Tr(`${p}/rest/v1`,{headers:this.headers,schema:(h=b.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new mr(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new bn(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Zn(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i},o,a){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xn({url:this.authUrl,headers:Object.assign(Object.assign({},o),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,fetch:a})}_initRealtimeClient(e){return new an(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t!=null?t:null),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut())}}const ss=(n,e,t)=>new ns(n,e,t),is="https://eegivytejhynaynwriah.supabase.co",os="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVlZ2l2eXRlamh5bmF5bndyaWFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NjM4OTMxODgsImV4cCI6MTk3OTQ2OTE4OH0.I85IP_j7-LAl7ka_a5woG8PqYsUQEeZXeEvloOD_Fvk",Q=ss(is,os);function as(n){let e;return{c(){e=k("div"),v(e,"class","avatar no-image")},m(t,r){R(t,e,r)},p:X,d(t){t&&j(e)}}}function ls(n){let e,t,r;return{c(){e=k("img"),_t(e.src,t=n[1])||v(e,"src",t),v(e,"alt",r=n[1]?"Avatar":"No image"),v(e,"class","avatar-image svelte-wkd32r")},m(s,i){R(s,e,i)},p(s,i){i&2&&!_t(e.src,t=s[1])&&v(e,"src",t),i&2&&r!==(r=s[1]?"Avatar":"No image")&&v(e,"alt",r)},d(s){s&&j(e)}}}function Rt(n){let e,t,r=n[2]?"Uploading ...":"Upload avatar",s,i,o,a,u,c;return{c(){e=k("div"),t=k("label"),s=q(r),i=C(),o=k("span"),a=k("input"),v(t,"class","button primary block upload-avatar"),v(t,"for","single"),v(a,"type","file"),v(a,"id","single"),v(a,"accept","image/*"),a.disabled=n[2],ee(o,"display","none")},m(l,h){R(l,e,h),g(e,t),g(t,s),g(e,i),g(e,o),g(o,a),u||(c=[V(a,"change",n[6]),V(a,"change",n[4])],u=!0)},p(l,h){h&4&&r!==(r=l[2]?"Uploading ...":"Upload avatar")&&se(s,r),h&4&&(a.disabled=l[2])},d(l){l&&j(e),u=!1,he(c)}}}function cs(n){let e,t;function r(a,u){return a[1]?ls:as}let s=r(n),i=s(n),o=n[0]&&Rt(n);return{c(){e=k("div"),i.c(),t=C(),o&&o.c(),v(e,"aria-live","polite")},m(a,u){R(a,e,u),i.m(e,null),g(e,t),o&&o.m(e,null)},p(a,[u]){s===(s=r(a))&&i?i.p(a,u):(i.d(1),i=s(a),i&&(i.c(),i.m(e,t))),a[0]?o?o.p(a,u):(o=Rt(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:X,o:X,d(a){a&&j(e),i.d(),o&&o.d()}}}function us(n,e,t){let{url:r}=e,{edit:s}=e,i=null,o=!1,a;const u=rr(),c=async p=>{try{const{data:_,error:f}=await Q.storage.from("avatars").download(p);if(f)throw f;const w=URL.createObjectURL(_);t(1,i=w)}catch(_){_ instanceof Error&&console.log("Error downloading image: ",_.message)}},l=async()=>{try{if(t(2,o=!0),!a||a.length===0)throw new Error("You must select an image to upload.");const p=a[0],_=p.name.split(".").pop(),f=`${Math.random()}.${_}`;let{error:w}=await Q.storage.from("avatars").upload(f,p);if(w)throw w;t(5,r=f),u("upload")}catch(p){p instanceof Error&&alert(p.message)}finally{t(2,o=!1)}};function h(){a=this.files,t(3,a)}return n.$$set=p=>{"url"in p&&t(5,r=p.url),"edit"in p&&t(0,s=p.edit)},n.$$.update=()=>{n.$$.dirty&32&&r&&c(r)},[s,i,o,a,l,r,h]}class Wt extends pe{constructor(e){super(),fe(this,e,us,cs,de,{url:5,edit:0})}}function hs(n){let e,t,r,s,i,o,a;function u(l){n[13](l)}let c={edit:!1};return n[5]!==void 0&&(c.url=n[5]),e=new Wt({props:c}),qe.push(()=>Lt(e,"url",u)),{c(){le(e.$$.fragment),r=C(),s=k("button"),s.textContent="edit profile",v(s,"type","button"),v(s,"class","button")},m(l,h){ie(e,l,h),R(l,r,h),R(l,s,h),i=!0,o||(a=V(s,"click",n[7]),o=!0)},p(l,h){const p={};!t&&h&32&&(t=!0,p.url=l[5],Dt(()=>t=!1)),e.$set(p)},i(l){i||(N(e.$$.fragment,l),i=!0)},o(l){J(e.$$.fragment,l),i=!1},d(l){oe(e,l),l&&j(r),l&&j(s),o=!1,a()}}}function ds(n){let e,t,r,s,i,o,a=n[0].user.email+"",u,c,l,h,p,_,f,w,b,E,y,T,O,P,me,M,Z,z,H,D=n[2]?"Saving ...":"Update profile",$e,ke,d,m,S,F;function L(x){n[9](x)}let $={edit:!0};return n[5]!==void 0&&($.url=n[5]),t=new Wt({props:$}),qe.push(()=>Lt(t,"url",L)),t.$on("upload",n[8]),{c(){e=k("form"),le(t.$$.fragment),s=C(),i=k("div"),o=q("Email: "),u=q(a),c=C(),l=k("div"),h=k("label"),h.textContent="Name",p=C(),_=k("input"),f=C(),w=k("div"),b=k("label"),b.textContent="Website",E=C(),y=k("input"),T=C(),O=k("div"),P=k("label"),P.textContent="Bio",me=C(),M=k("textarea"),Z=C(),z=k("div"),H=k("button"),$e=q(D),ke=C(),d=k("button"),d.textContent="cancel",v(h,"for","username"),v(_,"id","username"),v(_,"type","text"),v(b,"for","website"),v(y,"id","website"),v(y,"type","text"),v(P,"for","bio"),v(M,"id","bio"),v(M,"type","text"),v(H,"type","submit"),v(H,"class","button primary block"),H.disabled=n[2],v(d,"class","button secondary block"),v(z,"class","inline svelte-ql9o9n"),v(e,"class","form-widget")},m(x,G){R(x,e,G),ie(t,e,null),g(e,s),g(e,i),g(i,o),g(i,u),g(e,c),g(e,l),g(l,h),g(l,p),g(l,_),ue(_,n[3]),g(e,f),g(e,w),g(w,b),g(w,E),g(w,y),ue(y,n[4]),g(e,T),g(e,O),g(O,P),g(O,me),g(O,M),ue(M,n[6]),g(e,Z),g(e,z),g(z,H),g(H,$e),g(z,ke),g(z,d),m=!0,S||(F=[V(_,"input",n[10]),V(y,"input",n[11]),V(M,"input",n[12]),V(d,"click",n[7]),V(e,"submit",It(n[8]))],S=!0)},p(x,G){const Ee={};!r&&G&32&&(r=!0,Ee.url=x[5],Dt(()=>r=!1)),t.$set(Ee),(!m||G&1)&&a!==(a=x[0].user.email+"")&&se(u,a),G&8&&_.value!==x[3]&&ue(_,x[3]),G&16&&y.value!==x[4]&&ue(y,x[4]),G&64&&ue(M,x[6]),(!m||G&4)&&D!==(D=x[2]?"Saving ...":"Update profile")&&se($e,D),(!m||G&4)&&(H.disabled=x[2])},i(x){m||(N(t.$$.fragment,x),m=!0)},o(x){J(t.$$.fragment,x),m=!1},d(x){x&&j(e),oe(t),S=!1,he(F)}}}function fs(n){let e,t,r,s;const i=[ds,hs],o=[];function a(u,c){return u[1]?0:1}return e=a(n),t=o[e]=i[e](n),{c(){t.c(),r=Qt()},m(u,c){o[e].m(u,c),R(u,r,c),s=!0},p(u,[c]){let l=e;e=a(u),e===l?o[e].p(u,c):(Ge(),J(o[l],1,1,()=>{o[l]=null}),Ve(),t=o[e],t?t.p(u,c):(t=o[e]=i[e](u),t.c()),N(t,1),t.m(r.parentNode,r))},i(u){s||(N(t),s=!0)},o(u){J(t),s=!1},d(u){o[e].d(u),u&&j(r)}}}function ps(n,e,t){let{session:r}=e,s=!1,i=!1,o=null,a=null,u=null,c=null;ht(()=>{h()});function l(){t(1,s=!s)}const h=async()=>{try{t(2,i=!0);const{user:y}=r,{data:T,error:O,status:P}=await Q.from("profiles").select("username, website, avatar_url, bio").eq("id",y.id).single();if(O&&P!==406)throw O;T&&(t(3,o=T.username),t(4,a=T.website),t(5,u=T.avatar_url),t(6,c=T.bio))}catch(y){y instanceof Error&&alert(y.message)}finally{t(2,i=!1)}},p=async()=>{try{t(2,i=!0);const{user:y}=r,T={id:y.id,username:o,website:a,avatar_url:u,bio:c,updated_at:new Date().toISOString()};let{error:O}=await Q.from("profiles").upsert(T);if(O)throw O}catch(y){y instanceof Error&&alert(y.message)}finally{t(2,i=!1)}};function _(y){u=y,t(5,u)}function f(){o=this.value,t(3,o)}function w(){a=this.value,t(4,a)}function b(){c=this.value,t(6,c)}function E(y){u=y,t(5,u)}return n.$$set=y=>{"session"in y&&t(0,r=y.session)},[r,s,i,o,a,u,c,l,p,_,f,w,b,E]}class ms extends pe{constructor(e){super(),fe(this,e,ps,fs,de,{session:0})}}function vs(n){let e,t,r,s,i,o,a,u,c,l,h,p=n[0]?"Loading":"RSVP",_,f,w,b;return{c(){e=k("p"),e.textContent="Enter your email below to RSVP.",t=C(),r=k("form"),s=k("div"),i=k("label"),i.textContent="Email",o=C(),a=k("input"),u=C(),c=k("div"),l=k("button"),h=k("span"),_=q(p),v(e,"class","description"),v(i,"for","email"),v(a,"id","email"),v(a,"class","inputField"),v(a,"type","email"),v(a,"placeholder","Your email"),v(l,"type","submit"),v(l,"class","button primary block"),v(l,"aria-live","polite"),l.disabled=f=n[0]||n[1].length<5,v(c,"class","flex svelte-mzeos3"),v(r,"class","form-widget")},m(E,y){R(E,e,y),R(E,t,y),R(E,r,y),g(r,s),g(s,i),g(s,o),g(s,a),ue(a,n[1]),g(r,u),g(r,c),g(c,l),g(l,h),g(h,_),w||(b=[V(a,"input",n[4]),V(r,"submit",It(n[3]))],w=!0)},p(E,y){y&2&&a.value!==E[1]&&ue(a,E[1]),y&1&&p!==(p=E[0]?"Loading":"RSVP")&&se(_,p),y&3&&f!==(f=E[0]||E[1].length<5)&&(l.disabled=f)},d(E){E&&j(e),E&&j(t),E&&j(r),w=!1,he(b)}}}function gs(n){let e,t;return{c(){e=k("h3"),t=q(n[2])},m(r,s){R(r,e,s),g(e,t)},p(r,s){s&4&&se(t,r[2])},d(r){r&&j(e)}}}function _s(n){let e,t;function r(o,a){return o[2]?gs:vs}let s=r(n),i=s(n);return{c(){e=k("div"),t=k("div"),i.c(),v(t,"class","col-6 form-widget"),v(t,"aria-live","polite"),v(e,"class","row flex-center flex svelte-mzeos3")},m(o,a){R(o,e,a),g(e,t),i.m(t,null)},p(o,[a]){s===(s=r(o))&&i?i.p(o,a):(i.d(1),i=s(o),i&&(i.c(),i.m(t,null)))},i:X,o:X,d(o){o&&j(e),i.d()}}}function ys(n,e,t){let r=!1,s="",i="";const o=async()=>{try{t(0,r=!0);const{error:u}=await Q.auth.signInWithOtp({email:s});if(u)throw u;t(2,i="you are RSVP'd as maybe. check your email for magic link. when you get back here, you can change your RSVP to 'yes' (or 'no').")}catch(u){u instanceof Error&&t(2,i=u.message)}finally{t(0,r=!1)}};function a(){s=this.value,t(1,s)}return[r,s,i,o,a]}class bs extends pe{constructor(e){super(),fe(this,e,ys,_s,de,{})}}function ws(n){let e,t,r;return{c(){e=k("button"),e.textContent="RSVP!"},m(s,i){R(s,e,i),t||(r=V(e,"click",n[6]),t=!0)},p:X,d(s){s&&j(e),t=!1,r()}}}function ks(n){let e,t,r,s,i,o,a,u,c,l,h,p,_,f,w,b,E,y=n[0]&&$t();return{c(){e=k("h3"),t=q("RSVP to "),r=q(n[5]),s=C(),i=k("form"),o=k("label"),a=q("attending:"),u=C(),c=k("select"),y&&y.c(),l=k("option"),l.textContent="yes ",h=k("option"),h.textContent="maybe ",p=k("option"),p.textContent="no",_=C(),f=k("div"),w=q(n[3]),e.hidden=n[0],v(o,"for","attending"),o.hidden=n[0],l.__value="yes",l.value=l.__value,h.__value="maybe",h.value=h.__value,p.__value="no",p.value=p.__value,v(c,"id","attending"),v(i,"disabled",n[1]),f.hidden=n[0]},m(T,O){R(T,e,O),g(e,t),g(e,r),R(T,s,O),R(T,i,O),g(i,o),g(o,a),g(i,u),g(i,c),y&&y.m(c,null),g(c,l),g(c,h),g(c,p),yt(c,n[4]),R(T,_,O),R(T,f,O),g(f,w),b||(E=V(c,"change",n[7]),b=!0)},p(T,O){O&32&&se(r,T[5]),O&1&&(e.hidden=T[0]),O&1&&(o.hidden=T[0]),T[0]?y||(y=$t(),y.c(),y.m(c,l)):y&&(y.d(1),y=null),O&16&&yt(c,T[4]),O&2&&v(i,"disabled",T[1]),O&8&&se(w,T[3]),O&1&&(f.hidden=T[0])},d(T){T&&j(e),T&&j(s),T&&j(i),y&&y.d(),T&&j(_),T&&j(f),b=!1,E()}}}function $t(n){let e;return{c(){e=k("option"),e.textContent="attending",e.disabled=!0,e.__value="attending",e.value=e.__value},m(t,r){R(t,e,r)},d(t){t&&j(e)}}}function Es(n){let e;function t(i,o){if(i[2])return ks;if(!i[0])return ws}let r=t(n),s=r&&r(n);return{c(){e=k("div"),s&&s.c()},m(i,o){R(i,e,o),s&&s.m(e,null)},p(i,[o]){r===(r=t(i))&&s?s.p(i,o):(s&&s.d(1),s=r&&r(i),s&&(s.c(),s.m(e,null)))},i:X,o:X,d(i){i&&j(e),s&&s.d()}}}function Ts(n,e,t){let{session:r}=e,{showStatusOnly:s=!1}=e,i=!1,o=!1,a="",u=null,c=null;async function l(f){try{if(!r)return;t(1,i=!0);const{user:w}=r,{data:b,error:E,status:y}=await Q.from("rsvp").select("user_id, created_at, event_name, attending").eq("user_id",w.id).single();if(E&&y!==406)throw E;b&&(t(2,o=!0),t(4,u=b.attending),t(5,c=b.event_name))}catch(w){console.warn(w)}finally{t(1,i=!1)}}async function h(){try{t(1,i=!0);const{user:f}=r,{error:w,status:b}=await Q.from("rsvp").insert({user_id:f.id,event_name:"spooky",attending:"maybe"});if(w&&b!==406)throw w;t(2,o=!0),t(4,u="maybe"),t(5,c="spooky")}catch(f){console.warn(f)}finally{t(1,i=!1)}}async function p(f){try{t(1,i=!0);const{user:w}=r,b={attending:f,updated_at:new Date().toISOString()},{data:E,error:y,status:T}=await Q.from("rsvp").update(b).match({user_id:w.id,event_name:c});if(y&&T!==406)throw y}catch(w){console.warn(w)}finally{t(1,i=!1),t(3,a="updated!")}}function _(f){const w=f.target;p(w.value).then(()=>{t(4,u=w.value)})}return n.$$set=f=>{"session"in f&&t(8,r=f.session),"showStatusOnly"in f&&t(0,s=f.showStatusOnly)},n.$$.update=()=>{n.$$.dirty&256&&l()},[s,i,o,a,u,c,h,_,r]}class Yt extends pe{constructor(e){super(),fe(this,e,Ts,Es,de,{session:8,showStatusOnly:0})}}function Pt(n){let e,t;return{c(){e=K("text"),t=q("RSVP"),v(e,"x","160"),v(e,"y","250"),v(e,"font-size","69px"),v(e,"fill","#ff6600"),v(e,"font-family","cursive"),v(e,"class","svelte-ldzgwc")},m(r,s){R(r,e,s),g(e,t)},d(r){r&&j(e)}}}function Os(n){let e,t,r;return t=new Yt({props:{session:n[0],showStatusOnly:!0}}),{c(){e=k("div"),le(t.$$.fragment),v(e,"class","rsvpStatus fadein svelte-ldzgwc")},m(s,i){R(s,e,i),ie(t,e,null),r=!0},p(s,i){const o={};i&1&&(o.session=s[0]),t.$set(o)},i(s){r||(N(t.$$.fragment,s),r=!0)},o(s){J(t.$$.fragment,s),r=!1},d(s){s&&j(e),oe(t)}}}function Ss(n){let e,t,r,s,i,o,a,u;const c=[Rs,js],l=[];function h(p,_){return p[0]?1:0}return s=h(n),i=l[s]=c[s](n),{c(){e=k("div"),t=k("button"),t.textContent="\xD7",r=C(),i.c(),v(t,"class","close svelte-ldzgwc"),v(t,"title","close"),v(e,"class","rsvpopen fadein svelte-ldzgwc")},m(p,_){R(p,e,_),g(e,t),g(e,r),l[s].m(e,null),o=!0,a||(u=V(t,"click",n[4]),a=!0)},p(p,_){let f=s;s=h(p),s===f?l[s].p(p,_):(Ge(),J(l[f],1,1,()=>{l[f]=null}),Ve(),i=l[s],i?i.p(p,_):(i=l[s]=c[s](p),i.c()),N(i,1),i.m(e,null))},i(p){o||(N(i),o=!0)},o(p){J(i),o=!1},d(p){p&&j(e),l[s].d(),a=!1,u()}}}function js(n){let e,t,r,s,i,o,a,u;return r=new ms({props:{session:n[0]}}),i=new Yt({props:{session:n[0]}}),{c(){e=k("button"),e.textContent="Sign Out",t=C(),le(r.$$.fragment),s=C(),le(i.$$.fragment),v(e,"type","button"),v(e,"class","button block signout svelte-ldzgwc")},m(c,l){R(c,e,l),R(c,t,l),ie(r,c,l),R(c,s,l),ie(i,c,l),o=!0,a||(u=V(e,"click",n[5]),a=!0)},p(c,l){const h={};l&1&&(h.session=c[0]),r.$set(h);const p={};l&1&&(p.session=c[0]),i.$set(p)},i(c){o||(N(r.$$.fragment,c),N(i.$$.fragment,c),o=!0)},o(c){J(r.$$.fragment,c),J(i.$$.fragment,c),o=!1},d(c){c&&j(e),c&&j(t),oe(r,c),c&&j(s),oe(i,c),a=!1,u()}}}function Rs(n){let e,t;return e=new bs({}),{c(){le(e.$$.fragment)},m(r,s){ie(e,r,s),t=!0},p:X,i(r){t||(N(e.$$.fragment,r),t=!0)},o(r){J(e.$$.fragment,r),t=!1},d(r){oe(e,r)}}}function $s(n){let e,t,r,s,i,o,a,u,c,l,h,p,_,f,w,b,E,y,T,O,P=!n[1]&&Pt();const me=[Ss,Os],M=[];function Z(z,H){return z[1]?0:1}return b=Z(n),E=M[b]=me[b](n),{c(){e=k("div"),t=K("svg"),r=K("g"),s=K("g"),i=K("path"),o=K("path"),a=K("path"),u=K("path"),c=K("path"),l=K("path"),h=K("path"),p=K("path"),_=K("path"),f=K("path"),P&&P.c(),w=C(),E.c(),ee(i,"fill","#231815"),ee(i,"stroke","#80C272"),ee(i,"stroke-miterlimit","10"),v(i,"d",`M145.549,34.441
			c-36.314,13.206-93.555,172.797-82.903,218.956c10.652,46.159,42.608,111.255,118.354,132.557
			c75.747,21.305,203.57,15.386,234.344-7.101c30.77-22.487,41.483-127.823,28.462-158.595
			c-13.021-30.774-26.037-99.417-62.73-138.475C344.385,42.725,184.604,20.238,145.549,34.441z`),ee(o,"fill","#FFFFFF"),v(o,"d",`M108.171,144.511c0,0-1.129,7.102,9.045,8.285c10.178,1.183,22.616-5.919,22.616-5.919
			s-2.259-15.385,2.264-15.385c4.521,0,14.697,52.077,35.049,54.443c5.748,0.218,3.689-41.825,7.805-56.379
			c1.046-3.691,1.238-11.083,5.763-8.716c4.523,2.367-1.131,13.019,10.176,14.201c11.305,1.184,31.661,1.185,35.051-3.549
			c3.39-4.734,3.39-18.938,3.39-22.488c0-3.55,2.265,0.001,3.394,13.019c1.131,13.018,10.178,12.902,20.354,12.902
			c10.176,0,27.012,2.236,27.719-4.83c1.617-16.171,5.39-8.624,5.39-8.624s3.129,15.56,5.39,34.497
			c2.264,18.937,0.171,29.646,8.085,29.646c7.913,0,24.395-32.798,25.527-45.816c1.129-13.019,4.119-8.307,4.119-3.572
			c0,4.734,2.739,8.213,15.452,13.454c16.992,7.007,18.687-4.312,18.687-4.312s13.294,22.998,28.387,13.296
			c12.882-8.281-26.825-106.47-92.399-117.122C243.854,30.89,181.667,32.074,152.27,47.46
			c-29.395,15.386-75.755,104.153-84.801,115.988c-9.045,11.835,6.919-7.469,12.572-1.551c5.655,5.917,24.742-0.774,25.873-10.241
			C104.297,141.954,108.171,144.511,108.171,144.511z`),ee(a,"fill","#FFFFFF"),v(a,"d",`M271.849,318.774c-2.255-9.541-10.389-16.514-23.268-16.147
			c-12.884,0.364-10.526,13.506-11.311,20.732c-0.788,7.226-3.009-1.115-5.194-8.257c-2.188-7.141-6.218-9.427-12.164-9.259
			c-5.946,0.168-10.73,6.308-8.374,19.449c2.356,13.138-18.383-18.689-20.26-49.851c-2.221-8.342-9.125-6.945-12.884,0.366
			c-3.758,7.31-12.987,31.584-7.418,53.038c-1.878,3.655-9.704,7.478-11.174-9.287c-1.468-16.768-5.5-19.054-14.52-22.399
			c-9.022-3.346-14.627,8.82-14.627,8.82s-3.312-11.911-14.28-14.002c-10.97-2.089-16.914-1.921-14.524,12.419
			c2.392,14.341,36.316,91.416,180.996,87.303c144.678-4.113,149.512-101.761,146.131-116.072
			c-3.382-14.311-25.869,9.701-32.339,29.106c-3.312-11.913-17.939,5-21.801,8.711c-3.863,3.712-9.911,0.282-9.022-3.345
			c0.889-3.627-1.16-40.788-15.202-46.392c-10.149-8.116-7.007,32.616-21.291,53.432c-1.162-5.97,0.581-14.423-12.334-15.257
			c-12.918-0.834-14.594,10.02-14.457,14.819c-3.381-14.311-15.307-15.174-23.201-13.749
			C271.441,304.377,271.849,318.774,271.849,318.774z`),v(u,"class","lips svelte-ldzgwc"),v(u,"d",`M333.733,3.665c-40.449-0.19-66.278,1.184-106.519,0c-40.241-1.184-80.482-16.569-117.171,26.038
			S67.469,163.448,50.606,214.181c-4.853,14.6-19.918,29.744-15.183,47.498c3.478,13.038,29.589,78.114,75.747,127.824
			c30.665,33.025,78.499,70.459,136.108,33.139c33.318-21.584,107.378,13.656,139.658,0c30.775-13.02,74.384-82.337,90.551-176.121
			C425.745,133.332,399.872,3.974,333.733,3.665z M380.028,330.604c-37.874,10.652-50.861-10.018-97.019-6.468
			c-46.158,3.55-100.154,26.929-119.763,20.392c-28.406-9.469-75.747-62.727-84.032-79.298
			c-5.293-10.584-11.802-15.437-9.206-28.411c4.735-23.671,30.566-94.678,50.687-117.166c18.824-21.04,36.691-37.873,71.014-34.322
			c34.322,3.551,48.524,9.468,127.823-1.183c40.313-5.415,92.317,104.152,115.988,153.861
			C440.13,247.684,417.904,319.952,380.028,330.604z`),ee(c,"fill","#FFFFFF"),v(c,"d",`M119.701,39.001c10.071-18.126,26.951-32.341,49.59-30.185c22.639,2.156,36.653,7.546,24.795,7.546
			c-11.858,0-38.809-2.156-48.511,10.78c-9.702,12.936-28.029,35.575-34.497,34.497C104.609,60.562,114.311,48.704,119.701,39.001z`),ee(l,"fill","#FFFFFF"),v(l,"d",`M149.444,350.554c17.169,8.583,31.263,10.78,44.199,11.858c12.936,1.078,15.092,0,2.156,4.312
			c-12.936,4.312-19.405,11.858-34.497,3.234S142.976,347.319,149.444,350.554z`),ee(h,"fill","#FFFFFF"),v(h,"d",`M242.635,22.572c9.146,3.049,15.092,3.234,15.092-4.312c0-7.546,2.156-5.39,7.546,1.078
			c6.468-5.39,0-9.702,6.468-5.39c6.468,4.312,17.249,21.561,9.702,20.483c-7.546-1.078-9.702-9.702-14.014-8.624
			c-4.312,1.078,1.078,0-4.312,1.078c-5.39,1.078-10.78,3.234-19.405,2.156C235.089,27.962,239.401,21.494,242.635,22.572z`),ee(p,"fill","#FFFFFF"),v(p,"d",`M266.988,391.26c-7.142-5.714,3.234-9.702,9.702-5.39c6.468,4.312,20.483,2.156,19.405-7.546
			c-1.078-9.702,2.156-7.546,6.468-1.078c4.312,6.468,6.468,10.78,12.936,9.702s6.468-14.014,10.78-8.624
			c4.312,5.39,7.546,9.702,17.249,9.702s14.014-14.014,16.171-7.546c2.156,6.468-4.312,17.249-17.249,16.171
			c-12.936-1.078-10.78-9.702-19.405-4.312s-10.78,8.624-16.171,4.312c-5.39-4.312,2.156-4.312-5.39-4.312
			c-7.546,0-14.014-2.156-21.561,0C272.378,394.494,272.378,395.572,266.988,391.26z`),v(_,"class","lips svelte-ldzgwc"),v(_,"d",`M243.277,411.085c-38.807,9.702-19.413,56.716-43.13,57.794
		c-19.649,0.893-11.858-20.483-15.082-18.986c-5.146,2.39,19.394,62.107-6.479,62.107c-25.873,0,14.014-78.697-38.796-107.383
		C99.401,382.679,243.277,411.085,243.277,411.085z`),ee(f,"fill","#FFFFFF"),v(f,"d","M177.869,501.216c-5.39-5.39-1.078-17.249,2.156-11.858S177.869,501.216,177.869,501.216z"),v(t,"version","1.1"),v(t,"id","_x31_"),v(t,"xmlns","http://www.w3.org/2000/svg"),v(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),v(t,"x","0px"),v(t,"y","0px"),v(t,"viewBox","0 0 512 512"),ee(t,"enable-background","new 0 0 512 512"),v(t,"xml:space","preserve"),v(t,"class","svelte-ldzgwc"),Fe(t,"opened",n[1]),Fe(t,"closed",!n[1])},m(z,H){R(z,e,H),g(e,t),g(t,r),g(r,s),g(s,i),g(s,o),g(s,a),g(s,u),g(s,c),g(s,l),g(s,h),g(s,p),g(r,_),g(r,f),P&&P.m(r,null),g(e,w),M[b].m(e,null),y=!0,T||(O=V(t,"click",function(){xt(n[2])&&n[2].apply(this,arguments)}),T=!0)},p(z,[H]){n=z,n[1]?P&&(P.d(1),P=null):P||(P=Pt(),P.c(),P.m(r,null)),(!y||H&2)&&Fe(t,"opened",n[1]),(!y||H&2)&&Fe(t,"closed",!n[1]);let D=b;b=Z(n),b===D?M[b].p(n,H):(Ge(),J(M[D],1,1,()=>{M[D]=null}),Ve(),E=M[b],E?E.p(n,H):(E=M[b]=me[b](n),E.c()),N(E,1),E.m(e,null))},i(z){y||(N(E),y=!0)},o(z){J(E),y=!1},d(z){z&&j(e),P&&P.d(),M[b].d(),T=!1,O()}}}function Ps(n,e,t){let{session:r}=e,{open:s}=e,{toggle:i}=e,{close:o}=e;const a=()=>o(),u=()=>Q.auth.signOut();return n.$$set=c=>{"session"in c&&t(0,r=c.session),"open"in c&&t(1,s=c.open),"toggle"in c&&t(2,i=c.toggle),"close"in c&&t(3,o=c.close)},[r,s,i,o,a,u]}class As extends pe{constructor(e){super(),fe(this,e,Ps,$s,de,{session:0,open:1,toggle:2,close:3})}}function Cs(n){let e,t,r,s=n[0]===1?"person":"people",i,o,a=n[1]>0?`(${n[1]} maybe)`:"",u;return{c(){e=k("span"),t=q(n[0]),r=C(),i=q(s),o=q(" attending! "),u=q(a),v(e,"class","count svelte-k1em29")},m(c,l){R(c,e,l),g(e,t),g(e,r),g(e,i),g(e,o),g(e,u)},p(c,[l]){l&1&&se(t,c[0]),l&1&&s!==(s=c[0]===1?"person":"people")&&se(i,s),l&2&&a!==(a=c[1]>0?`(${c[1]} maybe)`:"")&&se(u,a)},i:X,o:X,d(c){c&&j(e)}}}function xs(n,e,t){let r=0,s=0;ht(()=>{i()});async function i(){const{count:o}=await Q.from("rsvp").select("attending",{count:"exact"}).eq("attending","yes");o&&t(0,r=o);const{count:a}=await Q.from("rsvp").select("attending",{count:"exact"}).eq("attending","maybe");o&&t(1,s=a)}return[r,s]}class Is extends pe{constructor(e){super(),fe(this,e,xs,Cs,de,{})}}function Us(n){let e,t,r,s,i,o,a,u,c;return o=new Is({}),{c(){e=k("div"),t=k("div"),r=k("div"),s=k("h1"),s.innerHTML=`\u{1F47B} <b>S P O O K Y</b>
        \u{1F383}`,i=C(),le(o.$$.fragment),a=C(),u=k("div"),u.innerHTML=`<p>a halloween themed tech meetup happening IRL in NYC! organized by
      <a href="http://edwardsharp.com">3dwardsharp</a></p> 

    <p>\u{1F5D3} Monday, Oct. 24, 2022, 6pm - 9pm</p> 

    <p>\u{1F3E4} kindly hosted by Reaktor at their office: <a href="https://goo.gl/maps/vibXtcHdWYWeZ8wj6" title="google maps">30 w. 21st St. NYC, 14th floor.</a> 
      <b>note: you will need to ask the person working at the front desk to let
        you up to the Reaktor office on the 14th floor.</b></p> 
    <p>\u{1F355} food (pizza with vegan, vegetarian, and other options) and drinks
      provided</p> 
    <p>\u{1F637} COVID safety: we kindly request that you wear a mask! there is outside
      balcony space where masks are optional, but please wear one while inside.</p> 
    <p>\u{1F9DF} capacity is limited to 50 people maximum, so please be realistic about
      your &quot;yes&quot; RSVP (you can come back here anytime and change it!)</p> 
    <p>\u{1F4F9} this will not be live-streamed</p> 
    <p>\u{1F4DC} we will follow the JSConf Code of Conduct, so check it out <a href="https://jsconf.com/codeofconduct.html">jsconf.com/codeofconduct.html</a></p> 
    <p>\u2753 questions? reach out to us at <a href="mailto:meetup.nyc@reaktor.fi">meetup.nyc@reaktor.fi</a></p> 
    <p>\u{1F64B} interested in doing something in the future? let us know by adding
      something to our github repo:
      <a href="https://github.com/reaktor/meetup.nyc">github.com/reaktor/meetup.nyc</a></p> 

    <h1 class="header">\u{1F47B} <b>P R E S E N T I N G</b>
      \u{1F383}</h1> 

    <div class="presenter svelte-gz1d84"><h2>briar sweetbriar</h2> 
      <img src="briarsweetbriar.png" title="this is a graphic from an article dazed wrote about us last year" alt="this is a graphic from an article dazed wrote about us last year" class="svelte-gz1d84"/> 
      <p>she/her</p> 
      <p>a child of the 90s, briar was excited by the radical potential of the
        early internet, though like many millennials, was disappointed by how
        that potential was enclosed by corporate behemoths and authoritarian
        policies. despite that disappointment, she started writing software 10
        years ago, working for numerous bay area startups, such as Pandora,
        Ticketfly, and Famous. in her spare time, she continues exploring ways
        to return to that original promise of the world wide web: trying to
        cultivate something resilient, beautiful, and egalitarian.</p> 
      <p>anarcho-syndicalism is a political practice oriented around
        worker-ownership and horizontal decision-making. typically,
        anarcho-syndicalist businesses are small, ranging from bookstores with a
        dozen worker-owners to factories with a 100 people making decisions
        together. what if we took this model and applied it to an international
        web application? imagine etsy, but everyone selling on the marketplace
        could propose policies and vote on them. or imagine uber, but every
        driver had a voice and could argue to increase payouts or to prioritize
        the development of particular features. numerous web applications like
        this are under development today, and during this talk, we&#39;ll discuss
        the organizational structure and decision-making practices for one such
        project.</p> 
      <p><a href="https://github.com/briarsweetbriar">github.com/briarsweetbriar</a></p></div> 

    <div class="presenter svelte-gz1d84"><h2>Hugh</h2> 
      <img src="lucid00.jpeg" title="lucid00" alt="lucid00" class="svelte-gz1d84"/> 
      <p>He/him</p> 
      <p>Freelance web developer/indie rapper</p> 
      <p>What I&#39;m up to: Building P2P web stuff in secret using WebTorrent,
        Hypercore and Secure Scuttlebutt, and making music.</p> 
      <p><a href="https://twitter.com/lucid00">twitter.com/lucid00</a></p> 
      <p><a href="http://lucid00.com">lucid00.com</a></p></div> 

    <div class="presenter svelte-gz1d84"><h2>Sabrina Sims (starlybri)</h2> 
      <img src="starlybri.jpg" title="starlybri" alt="starlybri" class="svelte-gz1d84"/> 
      <p>she/her</p> 
      <p>Sabrina Sims is a Black Puerto Rican interdisciplinary artist from the
        Bronx, New York. She experiments with mediums including synth music,
        poetry, riso printing, zines and textiles. Magic, transformation and
        subversive self care/kindness are common threads in her work. Sabrina
        teaches community workshops, plays shows and gives artist talks as part
        of her practice.</p> 
      <p>Sabrina will be showing a fall inspired AV installation-performance
        using her microfreak synthesizer, livecoded music in tidalcycles (build
        with Haskell) and visuals in hydra. She will be doing a relaxed Q&amp;A
        following about her tech-art practice.</p> 
      <p><a href="https://www.starlyart.studio/">starlyart.studio</a></p> 
      <p><a href="https://twitter.com/starlybri">twitter.com/starlybri</a></p></div>`,v(s,"class","header"),v(r,"class","titlecount svelte-gz1d84"),v(t,"class","inline svelte-gz1d84"),v(e,"class","container svelte-gz1d84")},m(l,h){R(l,e,h),g(e,t),g(t,r),g(r,s),g(r,i),ie(o,r,null),g(e,a),g(e,u),c=!0},p:X,i(l){c||(N(o.$$.fragment,l),c=!0)},o(l){J(o.$$.fragment,l),c=!1},d(l){l&&j(e),oe(o)}}}class Ds extends pe{constructor(e){super(),fe(this,e,null,Us,de,{})}}function At(n){let e,t;return e=new Ds({}),{c(){le(e.$$.fragment)},m(r,s){ie(e,r,s),t=!0},i(r){t||(N(e.$$.fragment,r),t=!0)},o(r){J(e.$$.fragment,r),t=!1},d(r){oe(e,r)}}}function Fs(n){let e,t,r,s=!n[1]&&At();return t=new As({props:{session:n[0],open:n[1],toggle:n[2],close:n[3]}}),{c(){s&&s.c(),e=C(),le(t.$$.fragment)},m(i,o){s&&s.m(i,o),R(i,e,o),ie(t,i,o),r=!0},p(i,[o]){i[1]?s&&(Ge(),J(s,1,1,()=>{s=null}),Ve()):s?o&2&&N(s,1):(s=At(),s.c(),N(s,1),s.m(e.parentNode,e));const a={};o&1&&(a.session=i[0]),o&2&&(a.open=i[1]),t.$set(a)},i(i){r||(N(s),N(t.$$.fragment,i),r=!0)},o(i){J(s),J(t.$$.fragment,i),r=!1},d(i){s&&s.d(i),i&&j(e),oe(t,i)}}}function Ls(n,e,t){let r,s=!1;ht(()=>{Q.auth.getSession().then(({data:a})=>{t(0,r=a.session)}),Q.auth.onAuthStateChange((a,u)=>{t(0,r=u)})});function i(){s||t(1,s=!0)}function o(){t(1,s=!1)}return[r,s,i,o]}class Bs extends pe{constructor(e){super(),fe(this,e,Ls,Fs,de,{})}}new Bs({target:document.getElementById("app")});
